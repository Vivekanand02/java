@WebServlet("/DepartmentServlet")
public class DepartmentServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        List<Department> departments = new DepartmentDAO().getAllDepartments(); // Get departments from DB

        // Set response content type to JSON
        response.setContentType("application/json");
        PrintWriter out = response.getWriter();

        // Convert the department list to JSON using Gson or Jackson
        Gson gson = new Gson();
        String json = gson.toJson(departments);
        out.print(json);
        out.flush();
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // Parse the department name from the request body
        BufferedReader reader = request.getReader();
        StringBuilder sb = new StringBuilder();
        String line;
        while ((line = reader.readLine()) != null) {
            sb.append(line);
        }
        String requestBody = sb.toString();

        // Parse JSON to extract department name
        Gson gson = new Gson();
        Department newDept = gson.fromJson(requestBody, Department.class);

        // Add the department to the database
        boolean success = new DepartmentDAO().addDepartment(newDept);

        // Respond with success or failure
        if (success) {
            response.setStatus(HttpServletResponse.SC_OK); // HTTP 200 OK
        } else {
            response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR); // HTTP 500 Internal Server Error
        }
    }
}
